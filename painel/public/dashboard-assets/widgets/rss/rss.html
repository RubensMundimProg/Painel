<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title></title>

    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/customizado.css"/>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>

</head>
<body>

<div class="container-fluid">

    <nav class="navbar navbar-default acessibilidade">
        <div class="container">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#" onclick="" class="jfontsize-button left" id="jfontsize-m2"><i class="fa fa-minus"></i></a></li>
                <li><a href="#" onclick="" class="jfontsize-button" id="jfontsize-d2"><i class="fa">A</i></a></li>
                <li><a href="#" onclick="" class="jfontsize-button" id="jfontsize-p2"><i class="fa fa-plus"></i></a></li>
                <li><a href="#">Tamanho da Fonte</a></li>
            </ul>
        </div><!-- /.container-fluid -->
    </nav>

    <!--<div class="loading"></div>-->

    <!--GLOBO G1 BRASIL-->
    <div class="row news marquee-globo-brasil">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="gray">G1 - Brasil</h5>
            <h4 class="marquee light-gray" id="g1-brasil">Carregando notícias...</h4>
        </div>
    </div>

    <!--GLOBO G1 EDUCACAO-->
    <div class="row news marquee-globo-educacao">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="gray">G1 - Educação</h5>
            <h4 class="marquee light-gray" id="g1-educacao">Carregando notícias...</h4>
        </div>
    </div>

    <!--GOOGLE-->
    <div class="row news marquee-google">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="">Google</h5>
            <h4 class="marquee" id="google">Carregando notícias...</h4>
        </div>
    </div>

    <!--CNN NEWS-->
    <div class="row news">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="gray">Clima Tempo - Destaque</h5>
            <h4 class="marquee light-gray" id="climatempo-destaque">Carregando notícias...</h4>
        </div>
    </div>

    <!--CLIMA Tempo-->
    <div class="row news">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="">Clima Tempo - Brasil</h5>
            <h4 class="marquee" id="climatempo-brasil">Carregando notícias...</h4>
        </div>
    </div>

    <!--CLIMA Tempo REGIÃO-->
    <div class="row news">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <h5 class="gray">Clima Tempo - Regiões</h5>
            <h4 class="marquee light-gray" id="climatempo-regioes">Carregando notícias...</h4>
        </div>
    </div>

    <!--TEMPO RESTANTE PARA A PROXIMA ATUALIZAÇÃO-->
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 text-right">
            <!--<h6 class="gray" id="time-remain"></h6>-->
        </div>
    </div>
</div>


<script type="text/javascript" src="/assets/jquery/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="marquee/jquery.marquee.js"></script>

<script type="text/javascript" src="/dashboard-assets/widgets/rss/js/jstorage.js"></script>
<script type="text/javascript" src="/dashboard-assets/widgets/rss/js/jquery.jfontsize-2.0.js"></script>
<script type="text/javascript" src="/dashboard-assets/widgets/rss/js/call.jfontsize.js"></script>

<script>
//RSS
    function loadRss(){
        $.ajax({
            url: "rss-loader.php",
            context: document.body
        }).done(function(x) {
            x = JSON.parse(x);
            getGloboNews(x[0]);
            getGloboEducation(x[1]);
            getGoogleNews(x[2]);
            getClimaTempoDestaque(x[3]);
            getClimaTempoBrasil(x[4]);
            getClimaTempoRegioes(x[5]);
            getClimaTempoCapitaisA(x[6]);
            getClimaTempoCapitaisB(x[7]);

//            timeRemain(1800000);

        });
    }

    function getGloboNews(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#g1-brasil").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title'];
                separador = ' | ';
            });
            $("#g1-brasil").text(item);
            //START MARQUEE
            $('#g1-brasil').marquee({
                duration: 10000
            });
        }else{
            $("#g1-brasil").text('sem notícias no momento');
        }
    }

    function getGloboEducation(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#g1-educacao").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title'];
                separador = ' | ';
            });
            $("#g1-educacao").text(item);
            //START MARQUEE
            $('#g1-educacao').marquee({
                duration: 10000
            });
        }else{
            $("#g1-educacao").text('sem notícias no momento');
        }
    }

    function getGoogleNews(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#google").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title'];
                separador = ' | ';
            });
            $("#google").text(item);
            //START MARQUEE
            $('#google').marquee({
                duration: 10000
            });
        }else{
            $("#google").text('sem notícias no momento');
        }
    }

    function getClimaTempoDestaque(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#climatempo-destaque").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title']+" - "+value['description'];
                separador = ' | ';
            });
            $("#climatempo-destaque").text(item);
            //START MARQUEE
            $('#climatempo-destaque').marquee({
                duration: 10000
            });
        }else{
            $("#climatempo-destaque").text('sem notícias no momento');
        }
    }

    function getClimaTempoBrasil(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#climatempo-brasil").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title']+" - "+value['description'];
                separador = ' | ';
            });
            $("#climatempo-brasil").text(item);
            //START MARQUEE
            $('#climatempo-brasil').marquee({
                duration: 10000
            });
        }else{
            $("#climatempo-brasil").text('sem notícias no momento');
        }
    }

    function getClimaTempoRegioes(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#climatempo-regioes").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['date']+" - "+value['title']+" - "+value['description'];
                separador = ' | ';
            });
            $("#climatempo-regioes").text(item);
            //START MARQUEE
            $('#climatempo-regioes').marquee({
                duration: 10000
            });
        }else{
            $("#climatempo-regioes").text('sem notícias no momento');
        }
    }

    function getClimaTempoCapitaisA(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#climatempo-capitais-a").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['title']+" - "+value['description'];
                separador = ' | ';
            });
            $("#climatempo-capitais-a").text(item);
            //START MARQUEE
            $('#climatempo-capitais-a').marquee({
                duration: 10000
            });
        }else{
            $("#climatempo-capitais-a").text('sem notícias no momento');
        }
    }

    function getClimaTempoCapitaisB(x){
        var item = '';
        var separador = '';

        if(x.length){
            $("#climatempo-capitais-b").text('');
            $.each(x, function(index, value) {
                item = item+separador+value['title']+" - "+value['description'];
                separador = ' | ';
            });
            $("#climatempo-capitais-b").text(item);
            //START MARQUEE
            $('#climatempo-capitais-b').marquee({
                duration: 10000
            });
        }else{
            $("#climatempo-capitais-b").text('sem notícias no momento');
        }
    }


    function timeRemain(time){
        time = time / 1000;
        var interval = setInterval(function (){
            if(time > 1){
                $("#time-remain").text(sformat(time));
                time--;
            } else {
                clearInterval(interval);
            }
        },1000)

    }

    function sformat(s) {
        var fm = [
//            Math.floor(s / 60 / 60 / 24), // DAYS
//            Math.floor(s / 60 / 60) % 24, // HOURS
            Math.floor(s / 60) % 60, // MINUTES
            s % 60 // SECONDS
        ];
        return $.map(fm, function(v, i) { return ((v < 10) ? '0' : '') + v; }).join(':');
    }


    $(document).ready(function(){

        loadRss();
        setInterval(function(){
            loadRss();
        },1800000);

    });
</script>
</body>
</html>